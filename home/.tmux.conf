# Set default shell
set-option -g default-shell /bin/bash

# Set prefix to Ctrl-a
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Enable mouse support
set -g mouse on

set -g base-index 1
setw -g pane-base-index 1

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'

# ==========================================
# Resurrect & Continuum Configuration
# ==========================================

# Auto-save interval (minutes)
set -g @continuum-save-interval '15'

# IMPORTANT: Control auto-restore behavior
# Option 1: Auto-restore last session (be careful with this)
# set -g @continuum-restore 'on'

# Option 2: Manual restore only (RECOMMENDED for tmuxy users)
set -g @continuum-restore 'off'

# Show save status in status bar (optional but useful)
set -g @continuum-status-interval 1
# Add this to your existing status-right if you want to see last save time
# set -g status-right 'Continuum: #{continuum_status}'

# Restore additional programs (optional)
set -g @resurrect-processes 'ssh nvim vim nano less more tail head'

# Capture pane contents (optional, uses more disk space)
set -g @resurrect-capture-pane-contents 'on'

# Restore vim/neovim sessions (if you use vim-obsession)
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'

set -g @yank_selection 'clipboard'

# Reload Tmux configuration and install TPM plugins
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# ==========================================
# Initialize TPM (keep this at the very bottom)
# ==========================================
run '~/.tmux/plugins/tpm/tpm' 

# isntall plugins 
bind I run-shell '~/.tmux/plugins/tpm/bin/install_plugins'
bind U run-shell '~/.tmux/plugins/tpm/bin/update_plugins all'


# Split panes
bind | split-window -h
bind - split-window -v

# Pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Window navigation
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9
bind -n M-0 select-window -t 10

# Everforest Theme Colors
set -g status-style bg="#2d353b",fg="#d3c6aa"
set -g status-left-length 40
set -g status-right-length 80

# Status bar left - session name with style
set -g status-left "#[fg=#2d353b,bg=#a7c080,bold] #S #[fg=#a7c080,bg=#424b50]#[fg=#d3c6aa,bg=#424b50] #I:#P #[fg=#424b50,bg=#2d353b]"

# Status bar right - git, time, system info
set -g status-right "#[fg=#2d353b,bg=#424b50]#[fg=#d3c6aa,bg=#424b50] #(git branch 2>/dev/null | grep '*' | sed 's/* //' || echo 'no-git') #[fg=#424b50,bg=#859289]#[fg=#2d353b,bg=#859289] %H:%M #[fg=#859289,bg=#e69875]#[fg=#2d353b,bg=#e69875] %Y-%m-%d #[fg=#e69875,bg=#2d353b]"

# Window status styling
setw -g window-status-style fg="#859289",bg="#232a2f"
setw -g window-status-current-style fg="#2d353b",bg="#a7c080",bold
setw -g window-status-activity-style fg="#e69875",bg="#232a2f",bold
setw -g window-status-bell-style fg="#e67e80",bg="#232a2f",bold

# Window status format with icons
setw -g window-status-format " #[fg=#859289]#I:#W#F "
setw -g window-status-current-format " #[fg=#2d353b,bold]#I:#W#F "
setw -g window-status-separator ""

# Pane borders
set -g pane-border-style fg="#4a555b"
set -g pane-active-border-style fg="#a7c080"

# Message styling
set -g message-style bg="#a7c080",fg="#2d353b",bold
set -g message-command-style bg="#424b50",fg="#d3c6aa"

# Clock mode styling
setw -g clock-mode-colour "#a7c080"
setw -g clock-mode-style 24

# Mode styling (copy mode, etc.)
setw -g mode-style bg="#a7c080",fg="#2d353b",bold

# Vim-style pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Quick session switching
bind C-j choose-tree

# Copy mode with vi keys
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Additional status bar enhancements
set -g status-interval 2
set -g status-justify centre

# Enhanced left status with session, window, and current directory
set -g status-left "#[fg=#2d353b,bg=#a7c080,bold] #S #[fg=#a7c080,bg=#424b50]#[fg=#d3c6aa,bg=#424b50] #I:#P #[fg=#424b50,bg=#859289]#[fg=#2d353b,bg=#859289] #(basename #{pane_current_path}) #[fg=#859289,bg=#2d353b]"

# Clean right status - git, time, date
set -g status-right "#[fg=#d3c6aa,bg=#424b50] #(git branch 2>/dev/null | grep '*' | sed 's/* //' || echo 'no-git') #[fg=#2d353b,bg=#424b50]#[fg=#d3c6aa,bg=#2d353b] %H:%M %Y-%m-%d "



